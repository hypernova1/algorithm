# 프로그래밍 대회에서 좋은 코드를 짜기 위한 원칙

## 간결한 코드 작성하기

코드가 짧으면 짧을 수록 오타나 단순한 버그가 생길 우려가 줄어들고, 디버깅이 쉽다.

### 1. 전역 변수를 광범위하게 사용

전역 변수를 많이 사용하면 프로램의 흐름을 파악하기 어려워지기 때문에 지양하는 것이 좋지만, **프로그래밍 대회에서 작성하는 코드는 구조가 매우 단순하고, 각 변수를 읽고 쓰는 부분이 어디인지가 비교적 명확하기 때문에 전역 변수를 쓰더라도 잃는 것이 많지 않다.**

### 2. C/C++ 매크로 사용

반복문처럼 자주 사용하는 코드의 일부를 매크로로 표현하자.

~~~cpp
bool hasDuplicate(const vector<int>& array) {
    for (int i = 0; i < array.size(); ++i) {
        for (int j = 0; j < i; ++j) {
            if (array[i] == array[j])
                return true;
        }
    }
    return false;
}
~~~

#### 매크로 사용

~~~cpp
#define FOR(i, n) for(int i = 0; i < (n); ++i)
bool hasDuplicate(const vector<int>& array) {
    FOR(i, array.size())
        FOR(j, i)
            if (array[i] == array[j])
                return true;
    return false;
}
~~~

#### 다음과 같은 코드 실수를 방지할 수 있다.

~~~cpp
for (int i = 0; i < array.size(); ++i)
    for(int j = 0; j < i; ++i) //++j 여야 함
~~~

### 3. 코드를 적극적으로 재사용

간결한 코드를 작성하기 위한 가장 직접적인 방법은 코드를 모듈화 하는 것이다. 같은 코드가 **세 번 이상 반복된다면 함수로 분리해여 재사용**한다. 또한 **한 함수가 두 가지 이상의 일을 해서는 안 된다.**

### 4. 표준 라이브러리 공부하기

큐나 스택같은 자료구조나 정렬 등의 기초적 알고리즘을 직접 작성하는 것은 대표적인 시간 낭비이다. 물론 학습을 할 때는 직접 구현하는 것이 맞지만, 시간 제한이 대회에서는 시간낭비이다. **표준 라이브러리는 많이 사용되고 검증되었기 때문에 메로리 관리나, 정당성 증명에 신경 쓸 필요 없이 편하게 사용할 수 있다.** 특히 팀으로 참가하는 대회에서는 **다른 팀원들도 이해하기 쉬워지기 때문에** 표준 라이브러리 사용은 필수이다.

### 5. 항상 같은 형태로 프로그램 작성

코드를 검증한다는 것은 쉬운 일이 아니기 때문에 항상 다른 방식으로 코드를 짜며 검증할 여유가 없다. 이는 디버깅 시간으로 연결되기 때문에 더 좋은 코드를 작성하는 방법에 대해서는 꾸준히 고민할 필요는 있지만, 자주 작성하는 알고리즘이나 코드 등에 대해서는 한 번 검증된 코드를 작성 후 이것만을 꾸준히 사용할 필요가 있다. **도구가 아닌 문제에 집중하자.**

### 6. 일관적이고 명료한 명명법 사용

모호하지 않은 변수명과 함수명을 사용하는 버릇을 들이고 사용하는 언어의 표준 라이브러리에서 사용하는 명명 규약을 익히자.

~~~cpp
bool judge(int y, int x, int cy, int cx, int cr);
~~~

위의 코드에서 알 수 있는 것은 두개의 2차원 좌표와 또 다른 값이 입력 값을 주어진 다는 것과 좌표 순서가 y, x라는 것 뿐이다. 함수가 언제 참을 반환하는 지 알 수 없다. 아래외 같이 **함수명만 바꾸어주면 훨씬 명료**해진다.

~~~cpp
bool isInsideCircle(int y, int x, int cy, int cx, int cr);
~~~

### 7. 모든 자료를 정규화해서 저장

**같은 자료를 두 가지 형태로 저장하지 않는다.** 예를 들어 유리수를 표현하는 함수를 작성한다고 했을 때, `9/6`을 표현하는 변수와 `3/2`를 표현하는 변수가 따로 존재하는데 같은 자료가 두 개 이상의 표현을 가지게 되면 미묘한 버그들을 만들기 쉽다. 시간을 표현할 경우에도 어떤 시간대로 저장되어 있는지, 당시에 일광 정략시간을 사용했는지 등이 섞이기 쉽기 때문에 협정 세계시(*Coordinated Universal Time, UTC*)로 표시한 시간과 시간대의 조합으로 시간을 저장하는 것이 좋다. 문자열의 경우에도 가능한 `UTF-8`이나 `UTF-16` 인코딩으로 변환해야 문자열을 다루기가 훨씬 편해진다. 정규화는 **프로그램이 자료를 입력 받거나 계산하자마자 바로 이루어져야한다.**

### 8. 코드와 데이터를 분리

~~~cpp
string getMonthName(int month) {
    if (month == 1) return "Jenuary";
    if (month == 2) return "February";
    ...
    return "December";
}
~~~

위와 같은 코드는 코드의 양도 길어지고 실수를 유발하기 쉽다. 다음과 같이 배열을 사용하여 코드의 논리와 상관 없는 데이터(월의 영문 이름)를 분리한다.

~~~cpp
const string monthName[] = { "Jenuary", "February", ..., "December" };
~~~

이런 방식의 코드는 코드의 양을 줄여서 실수를 하지 않게 도와준다. 이 기법의 또 다른 예로는 체스 게임이 있다. 각 말이 움직일 수 있는 위치를 프로그램으로 작성하는 대신 움직일 수 있는 상대 좌표를 배열에 저장하는 것이 좋다. 예를 들면 기사가 움직일 수 있는 좌표 여덟가지를 직접 코드에 저장하기보다 배열로 선언하고 배열을 순회하면서 각 위치를 검사하는 쪽이 훨씬 쉽다.

~~~cpp
const int knightDx[8] = { 2, 2, -2, -2, 1, 1, -1, -1 };
const int knightDy[8] = { 1, -1, 1, -1, 2, 2, 2, -2 };
~~~